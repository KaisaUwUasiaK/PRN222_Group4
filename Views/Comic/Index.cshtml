@model IEnumerable<Group4_ReadingComicWeb.Models.Comic>

@{
    ViewData["Title"] = "All Comics";
}

<main class="container" style="margin-top: 2rem; margin-bottom: 4rem;">
    <div class="section-header" style="margin-bottom: 2rem; border-bottom: 1px solid var(--border-color); padding-bottom: 1rem;">
        <div>
            <h2 style="font-size: 2rem; font-weight: 700;">All Comic</h2>
            <p class="text-muted">
                Discover the most complete comic book collection.
            </p>
        </div>

        <div class="flex gap-2">
            <span class="tag">Total: @Model.Count()</span>
        </div>
    </div>

    <div class="comic-grid">
        @if (Model != null && Model.Any())
        {
            foreach (var item in Model)
            {
                <a href="@Url.Action("Detail", "Comic", new { id = item.ComicId })" class="comic-card" style="display: block; color: inherit; text-decoration: none;">
                    <div class="card-image-wrapper">
                        <img src="@item.CoverImage" class="card-image" alt="@item.Title" onerror="this.src='/images/default-cover.jpg'">
                    </div>
                    <h3 class="card-title" style="margin-top: 10px; font-size: 1.1rem; font-weight: 600;">@item.Title</h3>
                    <div class="flex justify-between items-center" style="margin-top: 5px;">
                        <p class="card-meta" style="font-size: 0.85rem; color: var(--text-muted);">@item.Status</p>
                        @if (item.ComicTags != null && item.ComicTags.Any())
                        {
                            <span style="font-size: 0.7rem; padding: 2px 8px; background: rgba(255,255,255,0.1); border-radius: 4px;">
                                @item.ComicTags.First().Tag.TagName
                            </span>
                        }
                    </div>
                </a>
            }
        }
        else
        {
            <div style="grid-column: 1/-1; text-align: center; padding: 4rem;">
                <i class="ph-bold ph-magnifying-glass" style="font-size: 3rem; color: var(--text-muted);"></i>
                <p style="margin-top: 1rem;">
                    There are currently no comicss on the list.
                </p>
                <a href="/" class="btn btn-primary" style="margin-top: 1rem;">Back to home</a>
            </div>
        }
    </div>
    @if (ViewBag.TotalPages > 1)
    {
        <div class="pagination-container" style="display: flex; justify-content: center; margin-top: 3rem; gap: 8px;">

            @if (ViewBag.CurrentPage > 1)
            {
                <a href="@Url.Action("Index", new { page = ViewBag.CurrentPage - 1 })" class="btn-page">« Prev</a>
            }

            @for (int i = 1; i <= ViewBag.TotalPages; i++)
            {
                <a href="@Url.Action("Index", new { page = i })"
                   class="btn-page @(ViewBag.CurrentPage == i ? "active" : "")">
                    @i
                </a>
            }

            @if (ViewBag.CurrentPage < ViewBag.TotalPages)
            {
                <a href="@Url.Action("Index", new { page = ViewBag.CurrentPage + 1 })" class="btn-page">Next »</a>
            }
        </div>
    }

    <style>
        .btn-page {
            padding: 8px 16px;
            border: 1px solid #ddd;
            border-radius: 4px;
            color: white;
            text-decoration: none;
            background: rgba(255,255,255,0.05);
        }

            .btn-page.active {
                background: #e74c3c; /* Màu thương hiệu của bạn */
                border-color: #e74c3c;
            }

            .btn-page:hover:not(.active) {
                background: rgba(255,255,255,0.15);
            }
    </style>
</main>