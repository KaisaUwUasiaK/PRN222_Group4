@model Group4_ReadingComicWeb.ViewModels.ChangePasswordViewModel
@{
    ViewData["Title"] = "Change Password";
    Layout = null;
}

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>@ViewData["Title"] - ComicVerse</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Outfit:wght@500;700&display=swap"
          rel="stylesheet">

    <script src="https://unpkg.com/%40phosphor-icons/web"></script>

    <link rel="stylesheet" href="~/css/variables.css">
        <link rel="stylesheet" href="~/css/style.css">
            <link rel="stylesheet" href="~/css/auth.css">
                <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/notyf@3/notyf.min.css" />
                <style>
                    .validation-summary-errors {
                    display: none;
                    }
                </style>
            </head>
            <body>

                <div class="auth-container">
                    <div class="auth-bg-circle top-left"></div>
                    <div class="auth-bg-circle bottom-right"></div>

                    <div class="auth-card">
                        <div class="auth-header">
                            <a href="@Url.Action("Index", "Home")" class="auth-logo">
                                <i class="ph-fill ph-book-open-text"></i>
                                <span>ComicVerse</span>
                            </a>
                            <h1 class="auth-title">Change Password</h1>
                            <p class="auth-subtitle">Enter your current password and choose a new one</p>
                        </div>

                        <form asp-controller="User" asp-action="ChangePassword" method="post" novalidate>
                            @Html.AntiForgeryToken()
                            @Html.ValidationSummary(false, "", new { @class = "validation-summary-errors" })

                            <div class="form-group">
                                <label asp-for="CurrentPassword" class="form-label"></label>
                                <div class="input-wrapper">
                                    <input asp-for="CurrentPassword" type="password" class="form-input" placeholder="••••••••"
                                           autocomplete="current-password">
                                        <i class="ph ph-lock-key input-icon"></i>
                                    </div>
                                    <span asp-validation-for="CurrentPassword" class="text-danger"></span>
                                </div>

                                <div class="form-group">
                                    <label asp-for="NewPassword" class="form-label"></label>
                                    <div class="input-wrapper">
                                        <input asp-for="NewPassword" type="password" class="form-input" placeholder="••••••••"
                                               autocomplete="new-password">
                                            <i class="ph ph-lock-key-open input-icon"></i>
                                        </div>
                                        <span asp-validation-for="NewPassword" class="text-danger"></span>
                                    </div>

                                    <div class="form-group">
                                        <label asp-for="ConfirmPassword" class="form-label"></label>
                                        <div class="input-wrapper">
                                            <input asp-for="ConfirmPassword" type="password" class="form-input" placeholder="••••••••"
                                                   autocomplete="new-password">
                                                <i class="ph ph-check-circle input-icon"></i>
                                            </div>
                                            <span asp-validation-for="ConfirmPassword" class="text-danger"></span>
                                        </div>

                                        <button type="submit" class="btn btn-primary btn-block">
                                            <i class="ph ph-floppy-disk" style="margin-right: 8px;"></i>
                                            Update Password
                                        </button>
                                    </form>

                                    <div class="auth-footer">
                                        Changed your mind?
                                        <a href="@Url.Action("Profile", "User")" class="auth-link">Back to Profile</a>
                                    </div>
                                </div>
                            </div>

                            <script src="https://cdn.jsdelivr.net/npm/notyf@3/notyf.min.js"></script>
                            @await Html.PartialAsync("_ValidationScriptsPartial")
                            <script>
                                document.addEventListener('DOMContentLoaded', function () {
                                const notyf = new Notyf({ duration: 4000, position: { x: 'right', y: 'top' }, dismissible: true });

                                @if (TempData["Success"] != null)
                                {
                                    <text>notyf.success("@TempData["Success"]");</text>
                                }
                                @if (TempData["Error"] != null)
                                {
                                    <text>notyf.error("@TempData["Error"]");</text>
                                }

                                document.querySelectorAll('.validation-summary-errors li').forEach(function (item) {
                                var msg = item.textContent.trim();
                                if (msg) notyf.error(msg);
                                });
                                });
                            </script>

                        </body>

                    </html>