@model List<ComicModeration>

@{
    ViewData["Title"] = "Dashboard";
    ViewData["Breadcrumb"] = "Dashboard";
    Layout = "~/Views/Shared/_ModeratorLayout.cshtml";
}

<!-- Page Header -->
<div class="page-header">
    <div class="page-header-left">
        <h1>Dashboard</h1>
        <p>Welcome back, @User.Identity?.Name. Here's what's happening today.</p>
    </div>
</div>

<!-- Stats Grid -->
<div class="stats-grid">
    <div class="stat-card">
        <div class="stat-icon stat-icon-purple">
            <i class="ph ph-hourglass"></i>
        </div>
        <div class="stat-label">Pending Comics</div>
        <div class="stat-value">@Model.Count</div>
        <div class="stat-trend neutral">
            <i class="ph ph-clock"></i> Waiting for review
        </div>
    </div>

    <div class="stat-card">
        <div class="stat-icon stat-icon-red">
            <i class="ph ph-flag"></i>
        </div>
        <div class="stat-label">Pending Reports</div>
        <div class="stat-value">@ViewBag.PendingUserReportsCount</div>
        <div class="stat-trend neutral">
            <i class="ph ph-warning"></i> User reports
        </div>
    </div>
</div>

<!-- Pending Comics Table -->
<div class="data-card">
    <div class="data-card-header">
        <h3 class="data-card-title">Pending Comics for Review</h3>
        <a href="@Url.Action("Pending", "Moderation")" class="btn btn-outline" style="padding: 6px 14px; font-size: 0.85rem;">View All</a>
    </div>
    @if (Model.Any())
    {
        <div style="overflow-x: auto;">
            <table class="data-table">
                <thead>
                    <tr>
                        <th>Comic Title</th>
                        <th>Author</th>
                        <th>Created Date</th>
                        <th>Status</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var moderation in Model.Take(5))
                    {
                        <tr>
                            <td style="font-weight: 600; color: var(--text-primary);">@moderation.Comic.Title</td>
                            <td>@moderation.Comic.Author?.Username ?? "Unknown Author"</td>
                            <td>@moderation.Comic.CreatedAt.ToString("MMM dd, yyyy")</td>
                            <td>
                                <span class="badge badge-warning">
                                    <span class="badge-dot" style="background: #FBBF24;"></span>
                                    Pending
                                </span>
                            </td>
                            <td>
                                <a href="@Url.Action("Review", "Moderation", new { id = moderation.ComicModerationId })" 
                                   class="action-btn" style="color: var(--color-primary); border-color: rgba(124,58,237,0.3);">
                                    Review
                                </a>
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    }
    else
    {
        <div style="padding: 3rem 1rem; text-align: center;">
            <i class="ph ph-check-circle" style="font-size: 3rem; color: var(--color-accent); margin-bottom: 1rem; display: block;"></i>
            <p style="font-size: 1.2rem; font-weight: 600; color: var(--text-primary); margin-bottom: 0.5rem;">No pending comics!</p>
            <p style="color: var(--text-secondary); font-size: 0.95rem;">All comics have been reviewed.</p>
        </div>
    }
</div>